/**
 * @author Denise Souza
 */


//check network connection, and get current location
var network = require("network").check;
exports.geo = function() {
	Ti.Geolocation.getCurrentPosition(function(e) {
		var platform = Ti.Platform.osname;
		if (platform === "iphone") {
			
			if (Ti.Geolocation.AUTHORIZATION_AUTHORIZED) {
				var lon = e.coords.longitude;
				var lat = e.coords.latitude;
				var url = "http://api.wunderground.com/weather/api/8ad159642a519b70/conditions/q/" + lat + "," + lon + ".json";
				
			} else {
				alert("Cannot get your current location.");
			}
				network(url)
			
			} else {
				var lon = "-71.0822085";
				var lat = "41.9604969";
				var url = "http://api.wunderground.com/weather/api/8ad159642a519b70/conditions/q/" + lat + "," + lon + ".json";
				
				network(url);
			}
		
	});
	
};
